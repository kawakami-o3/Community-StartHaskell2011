｛第｝｛だい｝11｛章｝｛しょう｝：｛補足｝｛ほそく｝
====================================================

Show
----

｛第｝｛だい｝10｛章｝｛しょう｝に｛型｝｛かた｝クラスとインスタンスの
｛宣言｝｛せんげん｝について｛習｝｛なら｝いました。｛他｝｛ほか｝の
｛重要｝｛じゅうよう｝なクラスは`Prelude`で｛定義｝｛ていぎ｝してある
`Show`クラスです。このクラスのインスタンスは`show :: a -> String`という
｛関数｝｛かんすう｝を｛実装｝｛じっそう｝する｛必要｝｛ひつよう｝です。
この｛関数｝｛かんすう｝はある｛型｝｛かた｝`a`を`String`に
｛変換｝｛へんかん｝するものです。

140ページに｛定義｝｛ていぎ｝してある｛型｝｛かた｝`Expr`を
｛表示｝｛ひょうじ｝するようにできたら｛便利｝｛べんり｝です。
｛以下｝｛いか｝の｛通｝｛とお｝りにできます。

    instance Show Expr where
      show (Val x)       = show x
      show (App Add x y) = '(' : show x ++ " + " ++ show y ++ ")"
      show (App Sub x y) = '(' : show x ++ " - " ++ show y ++ ")"
      show (App Mul x y) = '(' : show x ++ " * " ++ show y ++ ")"
      show (App Div x y) = '(' : show x ++ " / " ++ show y ++ ")"

タイミング
----------

この｛章｝｛しょう｝には、｛経過時間｝｛けいかじかん｝でプログラムの
｛効率性｝｛こうりつせい｝を｛計｝｛はか｝ります。Haskellの｛中｝｛なか｝で
｛経過時間｝｛けいかじかん｝を｛計｝｛はか｝るには、`System.CPUTime`から
`getCPUTime`をインポートして、｛次｝｛つぎ｝の｛関数｝｛かんすう｝を
｛使｝｛つか｝ってください。

    timeIO :: Show a => a -> IO ()
    timeIO action = do t0 <- getCPUTime
                       putStrLn . show $ action
                       t1 <- getCPUTime
                       let td = fromIntegral (t1 - t0) / 10^12
                       putStrLn $ "Time elapsed: " ++ show td ++ " seconds"

この｛関数｝｛かんすう｝はあるアクションの｛実行｝｛じっこう｝の
｛経過時間｝｛けいかじかん｝を｛計｝｛はか｝って、アクションの
｛結果｝｛かっか｝と｛経過時間｝｛けいかじかん｝を｛両方｝｛りょうほう｝
｛表示｝｛ひょうじ｝されます。｛総当｝｛そうあ｝たり｛法｝｛ほう｝の
｛三｝｛み｝つのテストは｛以下｝｛いか｝の｛通｝｛とお｝りに｛定義｝｛ていぎ｝
します。

    mainBF1 :: IO ()
    mainBF1 = timeIO . head $ solutions [1,3,7,10,25,50] 765

    mainBF2 :: IO ()
    mainBF2 = timeIO . length $ solutions [1,3,7,10,25,50] 765

    mainBF3 :: IO ()
    mainBF3 = timeIO . length $ solutions [1,3,7,10,25,50] 831

`mainBF1`には、｛最初｝｛さいしょ｝の｛解｝｛かい｝のみを｛計算｝｛けいさん｝
するために`head`を｛使｝｛つか｝います。｛遅延評価｝｛ちえんひょうか｝の
おかげで｛他｝｛ほか｝の｛解｝｛かい｝を｛計算｝｛けいさん｝しません。
`mainBF2`と`mainBF3`には、｛全｝｛すべ｝ての｛解｝｛かい｝を
｛計算｝｛けいさん｝させるために`length`を｛使｝｛つか｝います。

｛他｝｛ほか｝の｛方法｝｛ほうほう｝をテストするための｛関数｝｛かんすう｝は
｛上｝｛うえ｝と｛同｝｛おな｝じようにして、ただ｛適用｝｛てきよう｝な
`solutions`｛関数｝｛かんすう｝を｛使｝｛つか｝います。

GHCiの｛中｝｛なか｝ではなくて、コマンドラインからテストします。これをする
ために、テストしたい｛関数｝｛かんすう｝を`main`に｛定義｝｛ていぎ｝します。

    main :: IO ()
    main = mainBF1

`ghc -O2 Filename.hs`というコマンドでコンパイルとリンクさせて、
｛生成｝｛せいせい｝された｛実行｝｛じっこう｝ファイルを｛起動｝｛きどう｝
します。
